<div class="container d-flex h-100 w-100">

  <nb-card [nbSpinner]="loading" nbSpinnerSize="giant" class="mb-0 ml-auto mr-auto align-self-center" style="width: 90%;max-height: 90%;">
    <nb-card-header>
      <div class="row">
        <div class="col">
          <h6>
            Details
          </h6>
        </div>
      </div>
    </nb-card-header>
    <nb-card-body class="">


      <nb-tabset (changeTab)="tabChanged($event)">
        <nb-tab tabTitle="Place" [badgeText]="places.length" badgeStatus="success">
          <!-- Name -->
          <div class="row form-group">
            <div class="col-3">
              <label for="nameInput" class="col-form-label">place name:</label>
            </div>
            <div class="col-9">
              <input type="text" name="nameInput" [(ngModel)]="place.name" nbInput fullWidth status="basic" placeholder="название географического места">
            </div>
          </div>

          <!-- Text -->
          <div class="row form-group">
            <div class="col-3">
              <label for="descriptionInput" class="col-form-label">text:</label>
            </div>
            <div class="col-9">
              <textarea rows="4" type="text" name="descriptionInput" [(ngModel)]="place.text" nbInput fullWidth status="basic" placeholder="текст из произведения"></textarea>
            </div>
          </div>

          <!-- Comment  -->
          <div class="row form-group">
            <div class="col-3">
              <label for="commentInput" class="col-form-label">comment:</label>
            </div>
            <div class="col-9">
              <input type="text" name="commentInput" [(ngModel)]="place.comment" nbInput fullWidth status="basic" placeholder="комментарий">
            </div>
          </div>

          <!-- Latitude -->
          <div class="row form-group">
            <div class="col-3">
              <label for="latitudeInput" class="col-form-label">latitude:</label>
            </div>
            <div class="col-9">
              <input type="number" name="latitudeInput" [(ngModel)]="place.latitude" nbInput fullWidth status="basic" placeholder="latitude">
            </div>
          </div>

          <!-- Longitude -->
          <div class="row form-group">
            <div class="col-3">
              <label for="longitudeInput" class="col-form-label">longitude:</label>
            </div>
            <div class="col-9">
              <input type="number" name="longitudeInput" [(ngModel)]="place.longitude" nbInput fullWidth status="basic" placeholder="longitude">
            </div>
          </div>

          <!-- Zoom -->
          <div class="row form-group">
            <div class="col-3">
              <label for="zoomInput" class="col-form-label">zoom:</label>
            </div>
            <div class="col-9">
              <input type="text" name="zoomInput" [(ngModel)]="place.zoom" nbInput fullWidth status="basic" placeholder="zoom">
            </div>
          </div>

          <!-- Images Input -->
          <div class="row form-group">
            <div class="col-3">
              <label for="imagesPlaceInput" class="col-form-label">images:</label>
            </div>
            <div class="col-9">
              <div class="row d-flex flex-column">
                <div class="col">
                  <input type="file" name="imagesPlaceInput" multiple [(ngModel)]="placeFilesToUpload" (change)="handleFileSelect($event)" nbInput fullWidth placeholder="path">
                </div>
              </div>
            </div>
          </div>

          <!-- Images  -->
          <div class="row form-group d-flex">
            <div class="col-5 m-2 ml-auto mr-auto d-flex justify-content-center" *ngFor="let image64 of place.images; let i = index">
              <!-- Delete Button -->
              <div style="color: crimson;position: absolute;right: 0px;top: -11px;cursor: pointer;" (click)="deleteFromImageArray(i)">
                <i class="fas fa-times-circle fa-2x"></i>
              </div>
              <img [src]="image64 | String64ToImage" alt="image" style="width: 100%;
                  height: auto;">
            </div>
          </div>

        </nb-tab>

        <!-- Book -->
        <nb-tab tabTitle="Book" [badgeText]="books.length" badgeStatus="success">
          <!-- Name -->
          <div class="row form-group">
            <div class="col-3">
              <label for="bookNameInput" class="col-form-label">book name:</label>
            </div>
            <div class="col-9">
              <input type="text" name="bookNameInput" [(ngModel)]="book.name" nbInput fullWidth status="basic" placeholder="book name">
            </div>
          </div>

          <!-- Autor -->
          <div class="row form-group">
            <div class="col-3">
              <label for="bookNAutorInput" class="col-form-label">book autor:</label>
            </div>
            <div class="col-9">
              <input type="text" name="bookNAutorInput" [(ngModel)]="book.autor" nbInput fullWidth status="basic" placeholder="book autor">
            </div>
          </div>

          <!-- Description -->
          <div class="row form-group">
            <div class="col-1">
              <label for="bookDescriptionInput" class="col-form-label">text:</label>
            </div>
            <div class="col-11">
            </div>
          </div>

          <!-- Text  -->
          <div class="row form-group">
            <div class="col">
              <textarea type="text" rows="12" name="bookDescriptionInput" [(ngModel)]="book.text" nbInput fullWidth status="basic" placeholder="description"></textarea>
            </div>
          </div>

          <!-- Images Input -->
          <div class="row form-group">
            <div class="col-3">
              <label for="bookImagePathInput" class="col-form-label">images:</label>
            </div>
            <div class="col-9">
              <div class="row d-flex flex-column">
                <div class="col">
                  <input type="file" name="bookImagePathInput" multiple [(ngModel)]="bookFilesToUpload" (change)="handleFileSelect($event)" nbInput fullWidth placeholder="path">
                </div>
              </div>
            </div>
          </div>

          <!-- Images  -->
          <div class="row form-group d-flex">
            <div class="col-5 m-2 ml-auto mr-auto d-flex justify-content-center" *ngFor="let image64 of book.images; let i = index">
              <!-- Delete Button -->
              <div style="color: crimson;position: absolute;right: 0px;top: -11px;cursor: pointer;" (click)="deleteFromBookImageArray(i)">
                <i class="fas fa-times-circle fa-2x"></i>
              </div>
              <img [src]="image64 | String64ToImage" alt="image" style="width: 100%;
                          height: auto;">
            </div>
          </div>

        </nb-tab>
      </nb-tabset>

    </nb-card-body>
    <nb-card-footer>
      <!-- Save Button -->
      <div class="row form-group">
        <div class="col text-center">
          <button [disabled]="!place.id" *ngIf="isPlaceTab" nbButton hero status="danger" (click)="deletePlace()">Delete</button>
        </div>
        <div class="col text-center">
          <button nbButton hero status="success" (click)="actionSaveSelect()">Save</button>
        </div>
      </div>
    </nb-card-footer>
  </nb-card>

</div>
